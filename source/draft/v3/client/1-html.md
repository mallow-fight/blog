---
title: html
order: 1
type: v3/client
---

## html5新特性

>[新特性](https://developer.mozilla.org/zh-CN/docs/Web/Guide/HTML/HTML5)

### 语义

**能够让你更恰当地描述你的内容是什么**
**让页面的内容结构化，结构更清晰，便于浏览器、搜索引擎解析**

- 字段和提纲
  - `<section>`
  - `<article>`
  - `<nav>`
  - `<header>`
  - `<footer>`
  - `<aside>`
  - `<hgroup>`

- 音频和视频
  - `<audio>`
  - `<video>`

- 表单
  - `required`：强制验证
  - `<input>`：属性`type`的一些新值
  - `<output>`：新的元素

- 语义元素
  - `<mark>`
  - `<figure>`
  - `<figcaption>`
  - `<data>`
  - `<time>`
  - `<output>`
  - `<progress>`
  - `<meter>`
  - `<main>`

- `<iframe>`
  - `sandbox`
  - `seamless`
  - `srcdoc`
  - 通过这些属性，可以精确的控制安全级别以及期望的渲染

- 允许直接嵌入数学公式
  - MathML

### 连通性

**能够让你和服务器之间通过创新的新技术方法进行通信**

- web sockets：允许在页面和服务器之间建立持久连接并通过这种方法来交换非HTML数据

- server-sent events：允许服务器向客户端推送事件，而不是仅在响应客户端请求时服务器才能发送数据的传统范式

- webRTC：RTC代表即时通信，允许连接到其他人，直接在浏览器中控制视频会议，而不需要一个插件或是外部的应用程序

### 离线 & 存储

**能够让网页在客户端本地存储数据以及更高效地离线运行**

- 离线资源（应用程序缓存）：火狐全面支持HTML5离线资源规范，其他大多数针对离线资源仅提供了某种程度上的支持

- 在线和离线事件：Firefox 3支持WHATWG在线和离线事件，这可以让应用程序和扩展检测是否存在可用的网络连接，以及在连接建立和断开时能感知到

- DOM存储：客户端会话和持久化存储让web应用程序能够在客户端存储结构化数据

- IndexedDB：为了能够在浏览器中存储大量结构化数据，并且能够在这些数据上使用索引进行高性能检索的Web标准

- 选择使用本地文件：对新的 `HTML5` 文件 `API` 的支持已经被添加到 `Gecko` 中，从而使 `Web` 应用程序可以访问由用户选择的本地文件。这包括使用 `type = file` 的 `<input>` 元素的新的 `multiple` 属性针对多文件选择的支持。 还有 `FileReader`。

### 多媒体

**使video和audio成为了在所有web中的一等公民**

- 使用HTML5音视频：`<audio>`和`<video>`元素嵌入并支持新的多媒体操作内容的操作

- WebRTC：允许连接到其他人，在浏览器中直接控制视频会议，而不需要一个插件或是外部的应用程序

- Camera：允许使用，操作计算机摄像头，并从中存储图像

- Track & WebVTT：`<track>`元素支持字幕和章节，`WebVTT`是一个文本轨道格式

### 2D/3D 绘图 & 效果

**提供了一个更加分化范围的呈现选择**

- canvas

- WebGL：非常符合OpenGL ES2.0并且可以用在HTML5`<canvas>`元素中的API给web带来了3D图像功能

- SVG：基于XML可以直接嵌入到HTML中的矢量图像格式

### 性能 & 集成

**提供了非常显著的性能优化和更有效的计算机硬件使用**

- web workers：能够把js计算委托给后台线程，通过允许这些活动以防止使交互型事件变得缓慢

- XMLHttpRequest Level 2：允许异步读取页面的某些部分，允许其显示动态内容，根据时间和用户行为而有所不同。这是在Ajax背后的技术

- 即时编译的js引擎：新一代的js引擎功能更强大，性能更杰出

- History：允许对浏览器历史记录进行操作，这对于那些交互地加载新信息的页面尤其有用

- contentEditable属性：把你的网站变成wiki

- 拖放：支持在网站内部和网站之间拖放项目，同时也提供了一个更简单的供扩展和基于Mozilla的应用程序使用的API

- 焦点管理：支持`activeElement`和`hasFocus`属性

- 基于Web的协议处理程序：你现在可以使用`navigator.registerProtocolHandler()`方法把web应用程序注册成一个协议处理程序

- requestAnimationFrame：允许控制动画渲染以获得更优性能

- 全屏：为一个网页或者应用程序控制使用整个屏幕，而不显示浏览器界面

- 指针锁定：允许锁定到内容的指针，这样游戏或者类似的应用程序在指针到达窗口限制时也不会失去焦点

- 在线和离线事件：为了构建一个良好的具有离线功能的web应用程序，你需要知道什么时候你的应用程序确实离线了，顺便提一句，在你的应用程序又再回到在线状态时你也需要知道

### 设备访问 Device Access

**能够处理各种输入和输出设备**

- camera：允许使用和操作计算机的摄像头，并从中存取照片。

- 触控事件：对用户按下触控屏的事件做出反应的处理程序。

- 使用地理位置定位：让浏览器使用地理位置服务定位用户的位置。

- 检测设备方向：让用户在运行浏览器的设备变更方向时能够得到信息，这可以被用作一种输入设备或者使页面的布局跟屏幕的方向相适应

- 指针锁定：允许锁定到内容的指针，这样游戏或者类似的应用程序在指针到达窗口限制时也不会失去焦点

### 样式设计：创作更加复杂的主题

**CSS已经扩展到能够以一个更加复杂的方法给元素设置样式，这通常被称为CSS3，尽管CSS已经不再是很难触动的规范，并且不同的模块并不全部位于level3：其中一些位于level1而另一些位于level4，覆盖了所有中间的层次**

- 新的背景样式特性：现在可以使用`box-shadow`给逻辑框设置一个阴影，而且可以设置多背景

- 更精美的边框：现在不仅可以使用图像来格式化边框，使用`border-image`和它关联的普通属性，而且可以通过`border-radius`属性来支持圆角边框

- 为你的样式设置动画：使用CSS Transitions以在不同的状态间设置动画，或者使用CSS Animations在页面的某些部分设置动画而不需要一个触发事件，你现在可以在页面中控制移动元素了

- 排版方面的改进：不但可以控制`text-overflow`和`hyphenation`，还可以给它设置一个阴影或者更精细地控制它的`decorations`。感谢新的`@font-face`规则，现在我们可以下载并应用自定义的字体了

- 新的展示性布局：为了提高设计的灵活性，已经有两种新的布局被添加了进来：CSS多栏布局(cloumn)，以及CSS灵活方框布局(flex)

## 知识点

### dataset

- data-* 全局属性 是一类被称为自定义数据属性的属性，它赋予我们在所有 HTML 元素上嵌入自定义数据属性的能力，并可以通过脚本(一般指JavaScript) 与 HTML 之间进行专有数据的交换。
- 通过HEMLElement.dataset.testValue或者是HTMLElement.dataset['testValue']来访问。
- 例子
```js
<img class="spaceship cruiserX3" src="shipX3.png"
  data-ship-id="324" data-weapons="laserI laserII" data-shields="72%"
  data-x="414354" data-y="85160" data-z="31940"
  onclick="spaceships[this.dataset.shipId].blasted()">
</img>
```

>[参考](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes/data-*)

### url&path

- 绝对路径：完整的访问路径
- 相对路径：相对本身的访问路径
- 文档片段：定位到某个文档id为#xxx的片段

### 元素类型

- 行内：a、span、img、input、select、strong
- 块级：div、ul、li、h1、p
- 空：br、img、hr、input、link、meta、source

### 无语义元素

- `span`是一个`行内无语义元素`，你应该仅仅当`无法找到更好的语义元素包含内容`时使用，或者`不想增加特定的含义`

- `div`是一个`块级无语义元素`，你应该仅仅当`找不到更好的块级元素`时使用，或者`不想增加特定的含义`

<p class="tip">`div`用起来非常便利以至于很容易被滥用。因为它们不携带语义值，所以会让你的HTML代码变的混乱。要小心的使用它们，只有当没有更好的语义解决方案才能使用，而且要尽可能把它的使用量降到最低，否则，当你升级和维护你的文档时会非常困难。</p>

### 换行 & 分割

- `<br>`在一个段落中创建一个换行

- `<hr>`在文档中生成一条水平分割线

### 元素种类

#### 块级元素

- 每个块级元素独占一行

- 元素的`height`、`width`、`line-height`、`margin-top`、`margin-bottom`都可设置

- 元素宽度在不设置的情况下，是它本身父容器的100%，除非设定一个宽度

#### 内联元素

- 和其他元素都在一行上

- 元素的`height`、`width`、`margin-top`、`margin-bottom`都不可设置

- 元素的宽度就是它包含的文字或图片的宽度，不可改变

- 多个内联元素的宽度超过行宽时，会自动换行

#### 内联块状元素

- 和其他元素都在一行上

- 元素的`height`、`width`、`line-height`、`margin-top`、`margin-bottom`都可设置

- 多个内联块状元素的宽度超过行宽时，会自动换行

#### 空元素

- 开始标签和结束标签之间内容和嵌套元素不生效的元素，例：

  - `<img>`

  - `<input>`

### 布尔属性

**可以设置布尔值的属性，例：`<button disabled>`，如果不设置属性值，默认是`true`**

### webSocket兼容低版本浏览器
- Adobe Flash Socket
- ActiveX HTMLFile（IE）
- 基于multipart编码发送的XHR
- 基于长轮询的XHR

### 页面可见性
- 通过`visibilityState`的值检测当前页面是否可见，以及打开网页的时间等。
- 在页面被切换到后台其他进程的时候，自动暂停音乐或视频的播放。

### link和@import
1. link属于XHTML标签，除了加载CSS外，还能用于定义RSS，定义rel连接属性等作用，而@import是CSS提供的，只能用于加载CSS
2. 页面被加载时，link会同时被加载，而@import引用的CSS会等到页面被加载完再加载
3. import是CSS2.1提出的，值在IE5以上才能被识别，而link是XHTML标签，无兼容问题
4. link支持使用js控制DOM去改变样式，而@import不支持

### 浏览器内核
**主要分为两个部分：**
1. 渲染引擎：负责取得页面的内容（HTML、XML、图像等）、整理讯息（加入CSS），以及计算网页的显示方式，然后会输出至显示器
2. JS引擎：解析和执行js来实现网页的动态效果
3. 最开始渲染引擎和JS引擎并没有明确区分，后来JS引擎越来越独立，内核就倾向于指渲染引擎

### 离线存储
- 在用户没有与因特网连接时，可以正常访问站点或应用，在用户与因特网连接时，更新用户机器上的缓存文件
- 原理：H5的离线存储是基于一个新建的`.appcache`文件的缓存机制（不是存储技术），通过这个文件上的解析清单离线存储资源，这些资源就会像cookie一样被存储了下来。之后当网络处于离线状态时，浏览器会通过被离线存储的数据进行页面展示。
- 判断是否离线：`window.navigator.onLine`
- 如何使用：
  - 页面头部加入一个`manifast`属性
  - 在`cache.manifest`文件编写离线存储的资源
  - 在离线状态时，操作`window.applicationCache`进行需求实现
- 在线情况下，浏览器发现html头部有manifest属性，它会请求manifest文件，如果是第一次访问app，那么浏览器就会根据manifest文件下载相应的资源并且进行离线存储。如果已经访问过app并且已经离线存储了，那么浏览器就会使用离线资源加载页面。然后浏览器会对比新的manifest文件和旧的manifest文件，如果文件没有发生改变，就不做任何操作，如果文件改变了，那么就会重新下载文件中的资源并进行离线存储。离线的情况下，浏览器就直接使用离线存储的资源。

### iframe优缺点
1. 搜索引擎的检索程序无法解读这种页面，不利于`SEO`
1. `iframe`会阻塞主页面的`onLoad`事件，`iframe`和主页面共享连接池，而浏览器对相同域的连接有限制，所以会影响页面的并行加载
1. 最好是通过js动态给iframe添加src属性，这样可以绕开以上两个问题

### label
**label标签来定义表单控制间的关系，当用户选择该标签时，浏览器会自动将焦点转到和标签相关的表单控件上：**

### form关闭自动完成
**给不想要提示的form或某个input设置：autocomplete=off**