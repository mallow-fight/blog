---
title: 最佳实践
order: 2
type: software
---

## 集中管理

- 设计一项涉及多页面功能时（比如说打点或者用户引导），尽量满足以下条件
  - 各页面调用的API简洁，可扩展性高
  - 设置一个集中注册点，方便管理和维护

## 环境变量

- 手动修改环境变量是很愚蠢的，一定以及肯定是有方法来在打包的时候就确定下来环境变量

## 高内聚-低耦合

**内聚是从功能角度来度量模块内的联系，一个好的内聚模块应当恰好做一件事。它描述的是模块内的功能联系。**
**耦合是软件结构中各模块之间相互连接的一种度量，耦合强弱取决于模块间接口的复杂程度、进入或访问一个模块的点以及通过接口的数据。**

### 定义
**高内聚低耦合，是软件工程中的概念，是判断设计好坏的标准，主要是面向对象的设计，主要是看类的内聚性是否高，耦合性是否低。**

### 概念
- 耦合性：也称块间联系。指软件系统结构中各模块间相互联系紧密程度的一种度量。模块之间联系越紧密，其耦合性就越强，模块的独立性则越差。模块间耦合高低取决于模块间接口的复杂性、调用的方式以及传递的信息。

- 低耦合：一个完整的系统，模块和模块之间，尽可能的使其独立存在。也就是说，让每个模块，尽可能的独立完成某个特定的子功能。模块和模块之间的接口，尽量少而简单。如果某两个模块间的关系比较复杂的话，最好首先考虑进一步的模块划分。这样有利于修改和组合。

- 内聚性：又称块内联系。指模块的功能强度的度量，即一个模块内部各个元素彼此结合的紧密程度的度量。若一个模块内各元素（语名之间、程序段之间）联系的越紧密，则它的内聚性就越高。

- 高内聚：一个软件模块是由相关性很强的代码组成，只负责一项任务，也就是常说的单一责任原则。

### 分类

**软件架构设计的目的简单说就是在保持软件内在联系的前提下，分解软件系统，降低软件系统开发的复杂性，而分解软件系统的基本方法无外乎分层和分割。但是在保持软件内在联系的前提下，如何分层分割系统，分层分割到什么样的程度，并不是一件容易的事，这方面有各种各样的分解方法，比如：关注点分离，面向方面，面向对象，面向接口，面向服务，依赖注入，以及各种各样的设计原则等。**

#### 耦合
**从高到低，越低越好：**

- 内容耦合：一个模块直接访问另一个模块的内容，举例
  - 一个模块直接访问另一个模块的内部数据
  - 一个模块不通过正常入口而直接转入到另一个模块的内部
  - 两个模块有一部分代码重叠（该部分代码具有一定的独立功能）
  - 一个模块有多个入口

- 公共耦合：一组模块都访问同一个全局数据结构，则称之为公共耦合。公共数据环境可以是全局数据结构、共享的通信区、内存的公共覆盖区等。如果模块只是向公共数据环境输入数据，或是只从公共数据环境取出数据，这属于比较松散的公共耦合；如何模块既向公共数据环境输入数据又从公共环境取出数据，这属于较紧密的公共耦合。

- 外部耦合：一组模块都访问同一全局简单变量，而且不通过参数表传递该全局变量的信息，则称之为外部耦合。

- 控制耦合：模块之间传递的不是数据信息，而是控制信息例如标志、开关量等，一个模块控制了另一个模块的功能。

- 标记耦合：调用模块和被调用模块之间传递数据结构而不是简单数据，其实传递的是地址。

- 数据耦合：调用模块和被调用模块之间只传递简单的数据项参数，也就是值传递。
- 非直接耦合：两个模块之间的联系完全是通过主模块的控制和调用来实现的。耦合度最弱，模块独立性最强。

#### 内聚
**由低到高，越高越好：**

- 偶然内聚：一个模块内的各处理元素之间没有任何联系，只是偶然地被凑到一起。这种模块也称为巧合内聚，内聚程度最低。

- 逻辑内聚：这种模块把几种相关的功能组合在一起，每次被调用时，由传送给模块参数来确定该模块应完成哪一种功能。

- 时间内聚：把需要同时执行的动作组合在一起形成的模块称为时间内聚模块。

- 过程内聚：构件或操作的组合方式，允许在调用前面的构件或操作之后，马上调用后面的构件或操作，即使两者之间没有数据进行传递。简单的说就是如果一个模块内的处理元素是相关的，而且必须以特定次序执行称为过程内聚。

- 通信内聚：指模块内所有处理元素都在同一个数据结构上操作或所有处理功能都通过公用数据而发生关联，即指模块内各个组成部分都使用相同的数据或产生相同的数据结构。

- 顺序内聚：一个模块中各个处理元素和同一个功能密切相关，而且这些处理必须顺序执行，通常前一个处理元素的输出是后一个处理元素的输入。

- 功能内聚：模块内所有元素的各个组成部分全部都为完成同一个功能而存在，共同完成一个单一的功能，模块已不可再分。即模块仅包括为完成某个功能所必须的所有成分，这些成分紧密联系、缺一不可。
  - 功能内聚是最强的内聚，其优点是它功能明确。判断一个模块是否功能内聚，一般从模块名称就能看出。如果模块名称只有一个动词和一个特定的目标（单数名词），一般来说就是功能内聚，如：“计算水费”、“计算产值”等模块。功能内聚一般出现在软件结构图的较低层次上。
  - 是一个“黑盒”，对于该模块的调用者来说，只需要知道这个模块能做什么，而不需要知道这个模块是如何做的。

### 作用
**事实上，短期来看，并没有很明显的好处，甚至短期内会影响系统的开发进度，因为高内聚，低耦合的系统对开发设计人员提出了更高的要求。高内聚，低耦合的好处体现在系统持续发展的过程中，高内聚，低耦合的系统具有更好的重用性，维护性，扩展性，可以更高效的完成系统的维护开发，持续的支持业务的发展，而不会成为业务发展的障碍。**